/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = { "1": {
    "q": "Begreppet Vetenskap och beprövad erfarenhet har funnits i sjukvården i mer än 100 år. Vilka instanser är det som i sista hand prövar om en viss behandling stämmer överens med vad som anses utgöra vetenskap och beprövad erfarenhet?",
    "a": "HSAN och förvaltningsdomstolarna"
  },
  "2": {
    "q": "När det gäller s.k. alternativmedicinska metoder. Vilka grundläggande krav anser myndigheterna att man ska ställa på en sådan metod?",
    "a": "Det ska inte vara ett förstahandsval, den får inte vara skadlig eller farlig för patienten, hälso- och sjukvårdspersonal har rätt att vägra medverka vid en sådan metod."
  },
  "3": {
    "q": "När har hälso- och sjukvårdspersonal rätt att vägra att medverka i vården av en patient som begärt att bli behandlad med en s.k. alternativmedicinsk metod?",
    "a": "Om man anser strida mot vetenskap och beprövad erfarenhet."
  },
  "4": {
    "q": "En korrekt förd patientjournal är avgörande för att ge patienten en god och adekvat vård. Ge två andra exempel på varför det är viktigt med en korrekt förd journal? ",
    "a": "Det är en informationskälla för uppföljning och utveckling i verksamheten och tillsyn och rättsliga krav."
  },
  "5": {
    "q": "Bristande journalföring och bristande rutiner för journalföring kritiseras ofta i tillsynsmyndighetens klagomålsbeslut. Ge fem exempel på allvarliga fel och brister som kan uppstå vid journalföring och dess konsekvenser (för patienten och/eller andra). Analysera och diskutera kring grundorsakerna bakom felen och hur felen skulle ha kunnat förebyggas. ",
    "a": "1. Läkaren förskriver läkemedel men skriver inte in det i journalen, syns inte vid nästa besök eller när man kollar i journalen. Det kan bli missförstånd och allvarliga problem för patienten och läkaren. Grundorsaken kan vara att läkaren inte hinner skriva in, glömmer för han är stressad. För att det skulle kunnat förebyggas ska det finnas rutiner för det, och att man får möjligheten att skriva in det direkt.\\n2. Skriver journal på fel patient. Orsaken kan vara att läkaren dikterat på fel patient, ouppmärksam sekreterare. Förebyggas genom rutiner för säkerhetskontroller"
  },
  "6": {
    "q": "I Patientdatalagen anges att uppgifter som ska antecknas ska föras in i journalen så snart som möjligt. Varför är det viktigt att så görs? ",
    "a": "För patientsäkerheten och för att den inte ska bli bortglömd."
  },
  "7": {
    "q": "Ange två skäl till varför det är viktigt att signering av en anteckning i journalen görs av den som gjort anteckningen?",
    "a": "Signeringen utgör en slags kontroll av anteckningens riktighet, det är bara den som gjort anteckningen eller dikteringen som kan bekräfta detta. Även för spårbarheten är det viktigt att rätt person signerar. "
  },
  "8": {
    "q": "Om en patient vill göra en rättelse eller ett tillägg i sin journal, till vem ska patienten vända sig för att detta ska bli gjort?",
    "a": "Till den ansvarige läkaren.  "
  },
  "9": {
    "q": "Vem avgör hur anteckningen om rättelsen eller tillägget i en journal ska lyda, om en patient önskar göra en rättelse eller tillägg? ",
    "a": "Den som ansvarar för anteckningen. "
  },
  "10": {
    "q": "Vilken instans kan besluta om att på patientens begäran göra en journalanteckning oläslig? ",
    "a": "IVO"
  },
  "11": {
    "q": "Ge tre exempel på när en läkare kan få tillgång en patients uppgifter som finns tillgängliga i det sammanhållna journalföringssystemet, utan att ha en aktuell patientrelation?r ",
    "a": "1. Om läkaren av annat skäl behöver uppgifterna för sitt arbete inom hälso- och sjukvården.\\n2. Vid utfärdande av intyg.\\n3. Patienten samtycker till det."
  },
  "12": {
    "q": "Patientsäkerhetslagen anger att Hälso-och sjukvårdspersonal har rapporteringsskyldighet.\\na. Vad innebär denna skyldighet och vad är de övergripande målen med denna skyldighet?\\nb. Vilka kan konsekvenserna bli för den person som underlåter att rapportera enligt denna skyldighet?",
    "a": "a. Vårdpersonalen ska rapportera till vårdgivaren risker för vårdskador samt händelser som har medfört eller hade kunnat medföra en vårdskada. Detta för att bidra till att hög patientsäkerhet upprätthålls. För att vårdgivaren ska kunna rapportera enligt lex Maria till IVO behövs att alla berörda aktörer fullgör sina skyldigheter.\\nb. IVO kan rikta kritik mot någon som inte rapporterat risker och händelser till vårdgivaren. Hens lämplighet att utöva yrket ifrågasätts, kan riskera åläggas prövotid och eventuell omplacering eller avstängning."
  },
  "13": {
    "q": "Melior och PMO är två journalsystem som används i bl.a. Region Gävleborg. Ge exempel på tre andra journalsystem som används i andra delar av landet. ",
    "a": "Cosmic, TakeCare, Vas"
  },
  "14": {
    "q": "Informationssäkerhet brukar allmänt definieras som att information ska uppfylla 4 olika kriterier: Vilka är det fyra kriterierna?",
    "a": "Tillgänglighet, konfidentialitet, riktighet och spårbarhet"
  },
  "15": {
    "q": "Vad betyder begreppen ’autentisering’ och ’stark autentisering’? ",
    "a": "Autentisering: kontroll av uppgiven identitet\\nStark autentisering: Kontroll av uppgiven identitet på två olika sätt. Säkrare än ett vanligt användarnamn och lösenord för att säkerställ att det är rätt person, t.ex. e-legitimation"
  },
  "16": {
    "q": "Vad är en informationssäkerhetspolicy? ",
    "a": "Den styr myndighetens informationssäkerhetsarbete och är en policy som anger mål och inriktning för informationssäkerhetsarbetet. "
  },
  "17": {
    "q": "Vilka skyldigheter och vilka åtgärder åvilar en vårdgivare innan ett informationssystem som behandlar personuppgifter kan tas i drift?",
    "a": "Vårdgivaren ska dokumentera de beslut som ar fattats om att ta i drift informationssystem som används för behandling av personuppgifter. Vårdgivaren bör ta fram en process för hanteringen av idrifttagandet; en beskrivning på systemets syfte och hur det ska användas, och en validering av att systemet följer informationssäkerhetspolicyn, krav på testning och andra av vårdgivarens angivna säkerhetskrav som kan vara relevanta.)"
  },
  "18": {
    "q": "Vårdgivaren ska ansvara för att åtkomst av uppgifter i journalsystemet kontrolleras och dokumenteras (genom s.k. loggar). Vad ska framgå av dessa loggar?",
    "a": "Vem som haft åtkomst till uppgifterna och när och vad som har gjorts med uppgifterna."
  },
  "19": {
    "q": "Enligt Patientsäkerhetslagen ska vårdgivaren årligen upprätta en patientsäkerhetsberättelse.\\na. Ge 5 exempel på uppgifter som denna berättelse ska innehålla?\\nb. Vem har rätt att få ta del av patientsäkerhetsberättelsen?",
    "a": "1. Hur patientsäkerhetsarbetet har bedrivits under föregående kalenderår\\n2. Vilka åtgärder som har vidtagits för att öka patientsäkerheten\\n3. Vilka resultat som har uppnåtts\\nb. För den som önskar att ta dela av den."
  },
  "20": {
    "q": "Läkemedelsgenomgångar är en metod för kartläggning av en patients samtliga ordinerade och använda läkemedel. Vad är syftet med denna genomgång?",
    "a": "För patienter som har många läkemedel (vanligen fler än fem), se till att patientens läkemedel är relevanta för den sjukdom/de sjukdomar som patienten har och det inte förekommer risk för att läkemedlen ”motverkar” varandra"
  },
  "21": {
    "q": "Hur ofta bör vårdgivaren se till att kvalitetsgranska verksamhetens läkemedelshantering? ",
    "a": "Minst en gång per år. "
  },
  "22": {
    "q": "Vad är en MAS (Medicinskt ansvarig sjuksköterska)? Och vad är hennes uppdrag?",
    "a": "1.	att det finns sådana rutiner att kontakt med läkare eller annan hälso- och sjukvårdspersonal när en patients tillstånd fordrar det\\n2.	att beslut om att delegera ansvar för vårduppgifter är förenliga med säkerheten för patienterna\\n3.	att anmälan görs till den nämnd som har ledningen av hälso-och sjukvårdsverksamheten, om en patient i samband med vård eller behandling drabbats av eller utsatts för risk att drabbas av allvarlig skada eller sjukdom."
  },
  "23": {
    "q": "Från o med 1 april 2017 gäller en uppdaterad version av Hälso- och sjukvårdslagen (2017:30). Var kan du hitta de senaste versionerna av lagar och förordningar?",
    "a": "www.lagrummet.se samt på www.riksdagen.se och myndigheternas hemsidor (myndigheternas föreskrifter)"
  },
  "24": {
    "q": "I 5:e kapitlet i Hälso- och sjukvårdslagen anges att kvaliteten i verksamheten systematiskt och fortlöpande ska utvecklas och säkras. Denna skyldighet återkommer i bl.a. Patientssäkerhetslagen (PSL) samt i Socialstyrelsens föreskrifter t.ex. SOSFS 2011:9. Ge 3 exempel på vad denna skyldighet innebär för:\\na. Vårdgivaren\\nb. Verksamhetschefen\\nc. Hälso- och sjukvårdspersonal ",
    "a": "a. Vårdgivaren ska:\\n-	se till att det finns ledningssystem för verksamheten\\n-	med stöd av ledningssystemet planera, leda, kontrollera, följa upp, utvärdera och förbättra verksamheten\\n-	ange hur uppgifterna som ingår i arbetet med att systematiskt och fortlöpande utveckla och säkra kvaliteten är fördelade i verksamheten\\nb. Verksamhetschefen ska:\\n- se till att det finns rutiner och arbetsinstruktioner för t.ex. behörighet\\nc. Hälso- och sjukvårdspersonal ska:\\n- rapportera risker och brister\\n- se till att följa de rutiner som finns\\n- komma med förbättringsförslag"
  },
  "25": {
    "q": "Vad menas med begreppet vårdgivare? ",
    "a": "Statlig myndighet, landsting och kommun i fråga om sådan hälso- och sjukvård som myndigheten, landstinget eller kommunen har ansvar för samt annan juridisk person eller enskild näringsidkare som bedriver hälso- och sjukvård. "
  },
  "26": {
    "q": "Kan en verksamhetschef inom hälso-och sjukvården vara jurist utan medicinska fackkunskaper? Om så är fallet, vem bestämmer detta?",
    "a": "Ja det går. Det är vårdgivaren som bestämmer det. "
  },
  "27": {
    "q": "Vårdgivaren ska planera för funktionsstörningar i bl.a. journalsystemen. Ge 3 exempel på praktiska lösningar på vad detta innebär för vårdgivaren. ",
    "a": "”Tester, back-up system, skydd mot skador. ”"
  },
  "28": {
    "q": "Vårdgivare ska bedriva ett aktivt patientsäkerhetsarbete för att identifiera risker för vårdskador och för att inhämta information om risker. Ange 5 användbara källor för att hitta och uppmärksamma risker. ",
    "a": "-	Personalens riskbedömningar och rapporteringar\\n-	Systematiska journalgenomgångar\\n-	Intervjuer och enkäter till patienter och deras anhöriga\\n-	Observationer för att mäta följsamhet till fastställda rutiner och nationella riktlinjer\\n-	Ärenden som behandlats i patientnämnder"
  },
  "29": {
    "q": "Riskinventeringar bör göras regelbundet och alltid när ny teknik införs och vid organisationsförändringar. Ge två exempel på andra situationer på en hälsocentral där riskbedömning behöver göras. ",
    "a": "T.ex. ombyggnationer och vid ”inskolning” av ny personal"
  },
  "30": {
    "q": "Vad menas med begreppet egenkontroll?",
    "a": "Systematisk uppföljning och utvärdering av den egna verksamheten samt kontroll av att den bedrivs enligt de processer och rutiner som ingår i verksamhetens ledningssystem."
  },
  "31": {
    "q": "Ge fyra exempel på vad som kan ingå i en egenkontroll.",
    "a": "Egenkontrollen kan innefatta:\\n-	jämförelser av verksamhetens resultat med uppgifter i nationella och regionala kvalitetsregister enligt 7 kap. patientdatalagen (2008:355),\\n-	jämförelser av verksamhetens resultat dels med uppgifter i öppna jämförelser, dels med resultat för andra verksamheter,\\n-	jämförelser av verksamhetens nuvarande resultat med tidigare resultat,\\n-	målgruppsundersökningar,\\n-	granskning av journaler, akter och annan dokumentation,\\n-	undersökning av om det finns förhållningssätt och attityder hos personalen som kan leda till brister i verksamhetens kvalitet,\\n-	analys av uppgifter från patientnämnder, och\\n-	inhämtande av synpunkter från revisorer och intressenter."
  },
  "32": {
    "q": "Vad menas med begreppet avvikelse?",
    "a": "En avvikelse är en händelse som har medfört eller hade kunnat medföra att patienten skadats."
  },
  "33": {
    "q": "Vad är PKU registret? ",
    "a": "En biobank där blodprover för barn födda i Sverige 1975 eller senare förvaras för vård och behandling, samt forskningssyfte. PKU-provet tas på alla nyfödda i Sverige för att diagnostisera ett antal medfödda sjukdomar för vilka det är viktigt att starta behandling tidigt."
  },
  "34": {
    "q": "Socialstyrelsen ansvarar för ett antal register bl.a. Patientregistret. Ge exempel på två andra register som SoS ansvarar för. ",
    "a": "Dödsorsaksregister och läkemedelsregister."
  },
  "35": {
    "q": "Vilken typ av sjukvård och tandvård har asylsökande som är under 18 år rätt till? ",
    "a": "Samma som svenska barn. "
  },
  "36": {
    "q": "Vilken typ av sjukvård och tandvård har asylsökande som är över 18 år? ",
    "a": "Asylsökande och personer utan tillstånd som är 18 år eller äldre har rätt till:\\n-	Vård som inte kan anstå\\n-	Mödrahälsovård\\n-	Vård vid abort\\n-	Preventivmedelsrådgivning\\n-	Läkemedel som förskrivs i samband med hälso- och sjukvård\\n-	Hjälpmedel som är direkt kopplade till den vård de har rätt till\\n-	Vård och åtgärder enligt smittskyddslagen\\n-	Akut tandvård och tandvård som inte kan anstå\\n-	En hälsoundersökning (på särskild mottagning)"
  },
  "37": {
    "q": "Faktainsamlandet kring en inträffad händelse sammanfattas ibland med akronymen NV4H? Vad betyder den? ",
    "a": "När = När upptäcktes felet/händelsen?\\nVad = Vad har hänt?\\nVad består felet/händelsen av?\\nVar = Var upptäcktes felet/händelsen?\\nVem = Vem upptäckte felet/händelsen?\\nVarför = Varför uppstod felet/händelsen\\nHur = Hur uppstod felet/händelsen?"
  },
  "38": {
    "q": "Vad är skillnaden mellan ett intyg och ett utlåtande?",
    "a": "Ett intyg är helt och hållet faktabaserat medan ett utlåtande är en bedömning av något slag. "
  },
  "39": {
    "q": "Ge exempel på nyttan med personregister för statistik, forskning och epidemiologiska undersökningar?",
    "a": "T.ex. för att kunna besvara frågor om varför vissa blir sjuka eller för att mäta effekterna av en viss behandling måste man veta om det är samma person som genomgått viss behandling eller exponerats för en viss risk som insjuknar 10 till 20 år senare."
  },
  "40": {
    "q": "Personuppgiftslagen (PuL) innehåller bestämmelser kring behandling av personuppgifter. Vilken myndighet övervakar tillämpningen av PuL?",
    "a": "Datainspektionen."
  },
  "41": {
    "q": "Förklara nedan begrepp\\na. Personuppgiftsansvarig\\nb. Personuppgiftsbiträde\\nc. Personuppgiftsombud",
    "a": "a. Personuppgiftsansvarig är den som ensam eller tillsammans med andra behandlar personuppgifter i sin verksamhet.\\nb. Personuppgiftsbiträde är den som behandlar personuppgifter för den personuppgiftsansvariges räkning.\\nc. Personuppgiftsombud är en person som ser till att personuppgifter behandlas på ett korrekt och lagligt sätt inom den egna organisationen."
  },
  "42": {
    "q": "EU har i april 2016 beslutat om ett nytt regelverk för behandling av personuppgifter som ska börja tillämpas i medlemsstaterna.\\na. När börjar den gälla?\\nb. För vem gäller den?",
    "a": "a. maj 2018\\nb. för hela EU"
  },
  "43": {
    "q": "Med den nya dataskyddsförordningen införs några nya begrepp bl.a. personuppgiftsincident och dataskyddsombud.\\na. Vad innebär personuppgiftsincident?\\nb. Vad är ett dataskyddsombud enligt den nya förordningen?",
    "a": "a. Personuppgiftincident är en säkerhetsincident som leder till oavsiktlig eller olaglig förstörning, förlust eller ändring av de personuppgifter som behandlats.\\nb. Dataskyddsombud är det nya personuppgiftsombudet. Dataskyddsombudets uppgifter är bland annat att informera och ge råd inom den egna organisationen om vilka skyldigheter som gäller enligt såväl förordningen som nationella bestämmelser. Ombudet ska också bevaka att dessa regler följs och ge råd om den konsekvensbedömning avseende dataskydd som ska göras enligt förordningen. Slutligen ska ombudet fungera som kontaktpunkt för dataskyddsmyndigheten och samarbeta med denna. "
  },
  "44": {
    "q": "Arkivlagen (ArkL) innehåller ett antal regler om vad kommuner och landsting ska göra när det gäller arkivbildning, ansvarsfördelning, arkivvård och gallring. Innehållet i arkiven är myndighetens allmänna handlingar och arbetsmaterial som tas om hand för arkivering och som därigenom blir allmänna handlingar.\\na.	Patientjournalen är en allmän handling men den kan ändå inte lämnas ut enligt offentlighetsprincipen, varför inte?\\nb.	Vad menas med gallring av en allmän handling?",
    "a": "a. Patientjournalen omfattas av sekretess\\nb. Gallring: förstöra"
  },
  "45": {
    "q": "Hur länge ska en patientjournal sparas efter den sista anteckningen? I vilken lag hittar du uppgifter om detta? ",
    "a": "uI minst 10 år. Det står i PDL. "
  },
  "46": {
    "q": "Vilken myndighet beslutar om en patientjournal hel eller delvis får förstöras?",
    "a": "IVO "
  }
};


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


(function() {
  var UNSEEN = 0;
  var FAILED = -1;
  var PASSED = 1;

  function LocalStorage(name) {
    this.name = name;

    this.reset = function() {
      localStorage.removeItem(this.name);
    };

    this.store = function(exerciseList) {
      var list = exerciseList.exercises;
      localStorage.setItem(this.name, JSON.stringify(
        list.map(function(exercise) {
          return {
            id: exercise.id,
            question: exercise.question,
            answer: exercise.answer,
            status: exercise.status
          };
        }))
      );
    };

    this.load = function() {
      var list = localStorage.getItem(this.name);
      list = JSON.parse(list);

      if (list) {
        return list.map(function(exercise) {
          return new Exercise(exercise.id, exercise.question, exercise.answer, exercise.status);
        });
      }
    };
  }

  function JSONStorage(json) {
    this.json = json;

    this.load = function() {
      var that = this;
      var keys = Object.keys(this.json);
      return keys.map(function(key) {
        var exercise = that.json[key];
        return new Exercise(key, exercise.q, exercise.a);
      });
    };
  }

  function Exercise(id, question, answer, status) {
    this.status = status || UNSEEN;
    this.id = id;
    this.question = question;
    this.answer = answer;

    this.unsee = function() {
      this.status = UNSEEN;
    };

    this.pass = function() {
      this.status = PASSED;
    };

    this.fail = function() {
      this.status = FAILED;
    };
  }

  function ExerciseList() {
    this.exercises = [];

    this.isEmpty = function() {
      return this.exercises.length === 0;
    };

    this.getAllByStatus = function(status) {
      return this.exercises.filter(function(exercise) {
        return exercise.status === status;
      });
    };

    this.count = function(status) {
      if (status) {
        return this.getAllByStatus(status).length;
      }
      else {
        return this.exercises.length;
      }
    };

    this.addExercise = function(exercise) {
      this.exercises.push(exercise);
      this.exercises.sort(function(i1, i2) {
         return i1.id - i2.id;
      });
    };

    this.removeExercise = function(exercise) {
      var index = -1;
      this.exercises.find(function(item, i) {
        if (item.id === exercise.id) {
          index = i;
          return true;
        }
      });

      if (index > -1) {
        this.exercises.splice(index, 1);
      }
      else {
        throw new Error('Cannot remove exercise: not found');
      }
    };

    this.getExercise = function(exercise) {
      return this.exercises.find(function(item) {
        return item.id === exercise.id;
      });
    };

    this.unseeExercise = function(exercise) {
      this.getExercise(exercise).unsee();
    };

    this.passExercise = function(exercise) {
      this.getExercise(exercise).pass();
    };

    this.failExercise = function(exercise) {
      this.getExercise(exercise).fail();
    };

    this.unseeAll = function() {
      this.exercises.forEach(function(exercise) {
        exercise.unsee();
      });
    };

    this.getStatus = function() {
      var unseenCount = 0;
      var passedCount = 0;
      var failedCount = 0;

      this.exercises.forEach(function(exercise) {
        switch (exercise.status) {
          case UNSEEN:
            unseenCount++;
            break;
          case PASSED:
            passedCount++;
            break;
          case FAILED:
            failedCount++;
            break;
        }
      });

      return {
        unseen: unseenCount,
        passed: passedCount,
        failed: failedCount
      };
    };

    this.getRandomExercise = function(status) {
      var candidates = this.getAllByStatus(status);

      if (candidates.length > 0) {
        var randomIndex = Math.floor(Math.random() * candidates.length);
        return candidates[randomIndex];
      }
      else {
        return false;
      }
    };

    this.forEach = function(fn) {
      return this.exercises.forEach(fn);
    };

    this.loadFromStorage = function(storage) {
      this.exercises = storage.load();
    };
  }

  function StatusBar(exerciseList) {
    this.exerciseList = exerciseList;

    this.getStatus = function() {
      return this.exerciseList.getStatus();
    };
  }

  function StatusBarToggle(statusBars) {
    this.statusBars = statusBars;
    this.current = 0;

    this.toggle = function() {
      this.current = (this.current + 1) % this.statusBars.length;
    };

    this.getStatus = function() {
      return this.statusBars[this.current].getStatus();
    };
  }

  function Vocable(onFinish) {
    this.exercises = new ExerciseList();
    this.combo = new ExerciseList();
    this.onFinish = onFinish;

    this.exercisesStorage = new LocalStorage('exercises');
    this.comboStorage = new LocalStorage('combo');
    var jsonStorage = new JSONStorage(__webpack_require__(0));

    // initialize the table from data in storage
    this.exercises.exercises = this.exercisesStorage.load() || jsonStorage.load();
    this.combo.exercises = this.comboStorage.load() || [];

    this.getAllExercises = function() {
      return this.exercises;
    };

    this.getRandomExercise = function() {
      if (this.combo.isEmpty()) {
        this.initCombo();
      }
      return this.combo.getRandomExercise(UNSEEN) || this.combo.getRandomExercise(FAILED);
    };

    this.initCombo = function() {
      var randomExercise = this.exercises.getRandomExercise(UNSEEN);
      this.combo.addExercise(randomExercise);
    };

    this.reset = function() {
      this.combo = new ExerciseList();
      this.exercises.unseeAll();
      this.exercisesStorage.reset();
      this.comboStorage.reset();
    };

    this.getStatus = function() {
      return this.exercises.getStatus();
    };

    this.getComboStatus = function() {
      return this.combo.getStatus();
    };

    this.passExercise = function(exercise) {
      this.exercises.passExercise(exercise);
      this.combo.removeExercise(exercise);

      if (this.combo.isEmpty()) {
        var passedCount = this.exercises.count(PASSED);
        var totalCount = this.exercises.count();

        if (passedCount === totalCount) {
          return this.onFinish();
        }

        var unseenList = new ExerciseList();
        unseenList.exercises = this.exercises.getAllByStatus(UNSEEN);
        var newComboCount = Math.min(passedCount, unseenList.count());

        for (var i = 0; i < newComboCount; ++i) {
          var unseenExercise = unseenList.getRandomExercise(UNSEEN);
          this.combo.addExercise(unseenExercise);
          unseenList.removeExercise(unseenExercise);
        }

        var that = this;
        var passedExercises = this.exercises.getAllByStatus(PASSED);
        passedExercises.forEach(function(passedExercise) {
          passedExercise.unsee();
          that.combo.addExercise(passedExercise);
        });
      }

      this.exercisesStorage.store(this.exercises);
      this.comboStorage.store(this.combo);

      return this.combo.getRandomExercise(UNSEEN) || this.combo.getRandomExercise(FAILED);
    };

    this.failExercise = function(exercise) {
      this.exercises.failExercise(exercise);
      this.combo.failExercise(exercise);

      this.exercisesStorage.store(this.exercises);
      this.comboStorage.store(this.combo);

      return this.combo.getRandomExercise(UNSEEN) || this.combo.getRandomExercise(FAILED);
    };
  }

  function Button(buttonClass, iconClass, onClick) {
    var button = document.createElement('button');
    var icon = document.createElement('icon');

    button.setAttribute('type', 'button');
    button.setAttribute('class', buttonClass);
    icon.setAttribute('class', iconClass);
    button.appendChild(icon);
    button.onclick = onClick;

    return button;
  }

  function Page(options, vocable) {
    this.leftButton = options.leftButton;
    this.rightButton = options.rightButton;
    this.statusBars = options.statusBars;
    this.header = options.header;
    this.content = options.content;
    this.vocable = vocable;

    this.onLeftButtonClick = function() {
      console.log(this);
    };

    this.onRightButtonClick = function() {
      console.log(this);
    };

    this.onStatusBarClick = function() {
      var barToggle = this.statusBars.bars;

      barToggle.toggle();
      this.updateStatus();
    };

    this.statusBars.wrapper.onclick = this.onStatusBarClick.bind(this);

    this.updateStatus = function() {
      var status = this.statusBars.bars.getStatus();
      var bars = this.statusBars.wrapper.children;
      var successBar = bars[0];
      var failBar = bars[1];
      var unseenBar = bars[2];

      var total = status.unseen + status.passed + status.failed;
      var unseen = status.unseen;
      var passed = status.passed;
      var failed = status.failed;

      unseenBar.innerText = unseen;
      successBar.innerText = passed;
      failBar.innerText = failed;

      var unseenPerc = total ? Math.round(100 * unseen / total) : 0;
      var passedPerc = total ? Math.round(100 * passed / total) : 0;
      var failedPerc = total ? Math.round(100 * failed / total) : 0;
      var rest = unseenPerc + passedPerc + failedPerc - 100;

      if (rest !== 0) {
        if (unseenPerc === 0) {
          failedPerc -= rest;
        }
        else {
          unseenPerc -= rest;
        }
      }

      unseenBar.style.width = unseenPerc + '%';
      successBar.style.width = passedPerc + '%';
      failBar.style.width = failedPerc + '%';
    };

    this.showContent = function() {};
  }

  function ExercisesPage(options, vocable, onStart) {
    Page.call(this, options, vocable);
    this.onStart = onStart;

    this.onLeftButtonClick = function() {
      this.vocable.reset();
      this.showContent();
      this.updateStatus();
    };

    this.onRightButtonClick = function() {
      this.onStart(this.vocable.getRandomExercise());
    };

    this.showContent = function() {
      this.header.innerHTML = '';
      this.content.innerHTML = '';

      // setup buttons
      this.leftButton.innerHTML = '';
      this.leftButton.appendChild(new Button(
        'btn btn-default',
        'fa fa-repeat',
        this.onLeftButtonClick.bind(this)
      ));
      this.rightButton.innerHTML = '';
      this.rightButton.appendChild(new Button(
        'btn btn-default',
        'fa fa-random',
        this.onRightButtonClick.bind(this)
      ));

      // setup title
      var title = document.createElement('h1');
      title.innerHTML = 'Exercises';
      this.header.appendChild(title);

      // setup exercise bubbles
      var that = this;
      this.vocable.exercises.forEach(function(exercise) {
        var bubble = document.createElement('span');

        if (exercise.status === PASSED) {
          bubble.style.backgroundColor = '#5cb85c';
        }
        if (exercise.status === FAILED) {
          bubble.style.backgroundColor = '#d9534f';
        }

        bubble.className = 'table-item badge';
        bubble.innerHTML = exercise.id;
        bubble.onclick = function() {
          if (that.vocable.combo.isEmpty()) {
            that.vocable.combo.addExercise(exercise);
            that.onStart(exercise);
          }
        };
        that.content.appendChild(bubble);
      });
    };
  }

  function ExercisePage(options, vocable, onExit) {
    Page.call(this, options, vocable);
    this.onExit = onExit;

    this.showContent = function(exercise) {
      var that = this;

      this.header.innerHTML = '';
      this.content.innerHTML = '';

      // setup buttons
      this.leftButton.innerHTML = '';
      this.leftButton.appendChild(new Button(
        'btn btn-danger',
        'fa fa-thumbs-down',
        function() {
          that.showContent(that.vocable.failExercise(exercise));
          that.updateStatus();
        }
      ));
      this.rightButton.innerHTML = '';
      this.rightButton.appendChild(new Button(
        'btn btn-success',
        'fa fa-thumbs-up',
        function() {
          that.showContent(that.vocable.passExercise(exercise));
          that.updateStatus();
        }
      ));

      // setup title
      var container = document.createElement('p');
      var title = document.createElement('span');
      var exit = document.createElement('i');

      container.className = 'lead';
      exit.className = 'fa fa-chevron-left';
      title.innerHTML = 'Question ' + exercise.id;

      exit.onclick = function() {
        that.onExit();
      };

      container.appendChild(exit);
      container.appendChild(title);
      this.header.appendChild(container);

      // setup question and answer
      var question = document.createElement('h3');
      var answer = document.createElement('p');
      var toggleQA = true; // Math.random() >= 0.5;

      if (toggleQA) {
        question.innerHTML = exercise.question;
        answer.innerHTML = exercise.answer;
      }
      else {
        question.innerHTML = exercise.answer;
        answer.innerHTML = exercise.question;
      }

      // make answer blurry at first
      answer.style.color = 'transparent';
      answer.style.textShadow = '0 0 10px rgba(0, 0, 0, 0.5)';

      // remove blur on click
      answer.onclick = function() {
        answer.style.color = 'black';
        answer.style.textShadow = 'none';
      };

      this.content.appendChild(question);
      this.content.appendChild(answer);
    };
  }

  ExercisesPage.prototype = Object.create(Page.prototype);
  ExercisePage.prototype = Object.create(Page.prototype);

  function init() {
    var vocable = new Vocable();
    var options = {
      leftButton: document.getElementById('leftButton'),
      rightButton: document.getElementById('rightButton'),
      statusBars: {
        wrapper: document.getElementById('statusBar'),
        bars: new StatusBarToggle([
          new StatusBar(vocable.exercises),
          new StatusBar(vocable.combo)
        ])
      },
      content: document.getElementById('content'),
      header: document.getElementById('header')
    };
    var exercisesPage = new ExercisesPage(options, vocable, function(exercise) {
      exercisePage.showContent(exercise);
    });
    var exercisePage = new ExercisePage(options, vocable, function() {
      exercisesPage.showContent();
    });

    exercisesPage.updateStatus();
    exercisesPage.showContent();
  }

  init();
})();


/***/ })
/******/ ]);